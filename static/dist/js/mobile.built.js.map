{"version":3,"sources":["../../js/mobile.js"],"names":["useLoc","document","getElementById","checked","localStorage","onchange","navBtn","querySelector","onclick","disabled","location","href","navigator","innerText","geolocation","getCurrentPosition","p","coords","latitude","longitude","err","alert","message","enableHighAccuracy","timeout","maximumAge","updateTimes","remains","querySelectorAll","i","length","element","now","Date","getTime","secondsPassed","Math","floor","pageLoaded","alivefor","getAttribute","remain","min","sec","setInterval","forEach","listItem","window"],"mappings":";;AAAA,IAAIA,SAASC,SAASC,cAAT,CAAwB,SAAxB,CAAb;AACAF,OAAOG,OAAP,GAAiBC,aAAaJ,MAAb,KAAwB,MAAzC;AACAA,OAAOK,QAAP,GAAkB,YAAY;AAC5BD,eAAaJ,MAAb,GAAsBA,OAAOG,OAA7B;AACD,CAFD;;AAIA,IAAIG,SAASL,SAASM,aAAT,CAAuB,aAAvB,CAAb;AACAD,OAAOE,OAAP,GAAiB,YAAY;AAC3B,MAAIJ,aAAaJ,MAAb,KAAwB,MAA5B,EAAoC;AAClCM,WAAOG,QAAP,GAAkB,IAAlB;AACA,WAAQC,SAASC,IAAT,GAAgB,QAAxB;AACD,GAHD,MAGO,IAAI,iBAAiBC,SAArB,EAAgC;AACrC;AACAN,WAAOG,QAAP,GAAkB,IAAlB;AACAH,WAAOO,SAAP,GAAmB,aAAnB;;AAEA;AACAD,cAAUE,WAAV,CAAsBC,kBAAtB,CAAyC,UAAUC,CAAV,EAAa;AACpDV,aAAOO,SAAP,GAAmB,cAAnB;AACAH,eAASC,IAAT,GAAgB,gBAAgBK,EAAEC,MAAF,CAASC,QAAzB,GAAoC,OAApC,GAA8CF,EAAEC,MAAF,CAASE,SAAvE;AACD,KAHD,EAGG,UAAUC,GAAV,EAAe;AAChBd,aAAOO,SAAP,GAAmB,QAAnB;AACAP,aAAOG,QAAP,GAAkB,KAAlB;AACAY,YAAM,6BAA6BD,IAAIE,OAAvC;AACD,KAPD,EAOG;AACDC,0BAAoB,IADnB;AAEDC,eAAS,IAFR;AAGDC,kBAAY;AAHX,KAPH;AAYD,GAlBM,MAkBA;AACLJ,UAAM,8CAAN;AACD;AACF,CAzBD;;AA2BA,SAASK,WAAT,GAAwB;AACtB;AACA;AACA;AACA;AACA;AACA,MAAIC,UAAU1B,SAAS2B,gBAAT,CAA0B,YAA1B,CAAd;AACA,OAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,QAAQG,MAA5B,EAAoC,EAAED,CAAtC,EAAyC;AACvC,QAAIE,UAAUJ,QAAQE,CAAR,CAAd;AACA,QAAIG,MAAM,IAAIC,IAAJ,GAAWC,OAAX,EAAV;AACA,QAAIC,gBAAgBC,KAAKC,KAAL,CAAW,CAACL,MAAMM,UAAP,IAAqB,IAAhC,CAApB;AACA,QAAIC,WAAWR,QAAQS,YAAR,CAAqB,WAArB,CAAf;AACA,QAAIC,SAASF,WAAWJ,aAAxB;AACA,QAAIO,MAAMN,KAAKC,KAAL,CAAWI,SAAS,EAApB,CAAV;AACA,QAAIE,MAAMF,SAAS,EAAnB;AACAV,YAAQlB,SAAR,GAAqB4B,SAAS,CAAV,GAAeC,MAAM,OAAN,GAAgBC,GAAhB,GAAsB,MAArC,GAA8C,WAAlE;AACD;AACF;AACDC,YAAYlB,WAAZ,EAAyB,IAAzB;;AAEAzB,SAAS2B,gBAAT,CAA0B,IAA1B,EAAgCiB,OAAhC,CAAwC,UAAUC,QAAV,EAAoB;AAC1DA,WAAStC,OAAT,GAAmB,YAAY;AAC7BuC,WAAO9C,QAAP,CAAgBS,QAAhB,GAA2B,KAAK8B,YAAL,CAAkB,MAAlB,CAA3B;AACD,GAFD;AAGD,CAJD","file":"mobile.built.js","sourcesContent":["var useLoc = document.getElementById('use-loc')\nuseLoc.checked = localStorage.useLoc === 'true'\nuseLoc.onchange = function () {\n  localStorage.useLoc = useLoc.checked\n}\n\nvar navBtn = document.querySelector('#nav button')\nnavBtn.onclick = function () {\n  if (localStorage.useLoc !== 'true') {\n    navBtn.disabled = true\n    return (location.href = 'mobile')\n  } else if ('geolocation' in navigator) {\n    // Getting the GPS position can be very slow on some devices\n    navBtn.disabled = true\n    navBtn.innerText = 'Locating...'\n\n    // Get location and use it!\n    navigator.geolocation.getCurrentPosition(function (p) {\n      navBtn.innerText = 'Reloading...'\n      location.href = 'mobile?lat=' + p.coords.latitude + '&lon=' + p.coords.longitude\n    }, function (err) {\n      navBtn.innerText = 'Reload'\n      navBtn.disabled = false\n      alert('Failed to get location: ' + err.message)\n    }, {\n      enableHighAccuracy: true,\n      timeout: 5000,\n      maximumAge: 5000\n    })\n  } else {\n    alert('Your device does not support web geolocation')\n  }\n}\n\nfunction updateTimes () {\n  // server tells us how many seconds are left we note the\n  // pageload time and count down from there.\n  // Yes, this could be a smidge innaccurate, but not by\n  // more than 1 second or so which doesn't matter.\n  // And now we don't have to deal with timestamps and dates!\n  var remains = document.querySelectorAll('div.remain')\n  for (var i = 0; i < remains.length; ++i) {\n    var element = remains[i]\n    var now = new Date().getTime()\n    var secondsPassed = Math.floor((now - pageLoaded) / 1000)\n    var alivefor = element.getAttribute('disappear')\n    var remain = alivefor - secondsPassed\n    var min = Math.floor(remain / 60)\n    var sec = remain % 60\n    element.innerText = (remain > 0) ? min + ' min ' + sec + ' sec' : '(expired)'\n  }\n}\nsetInterval(updateTimes, 1000)\n\ndocument.querySelectorAll('li').forEach(function (listItem) {\n  listItem.onclick = function () {\n    window.document.location = this.getAttribute('href')\n  }\n})\n"]}