{"version":3,"sources":["../../js/stats.js"],"names":["countMarkers","map","document","getElementById","innerHTML","i","arenaCount","arenaTotal","pkmnCount","pkmnTotal","pokestopCount","pokestopTotal","pokeStatTable","$","DataTable","currentVisibleMap","getBounds","thisPokeIsVisible","thisGymIsVisible","thisPokestopIsVisible","Store","get","each","mapData","pokemons","key","value","thisPokeLocation","lat","lng","contains","Count","pokeCounts","length","push","ID","Name","Math","round","dataTable","show","clear","rows","add","draw","hide","gyms","thisGymLocation","arenaListString","pokestops","thisPokestopLocation","pokestopListString"],"mappings":"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","file":"stats.built.js","sourcesContent":["function countMarkers (map) { // eslint-disable-line no-unused-vars\n  document.getElementById('stats-ldg-label').innerHTML = ''\n  document.getElementById('stats-pkmn-label').innerHTML = 'Pokémon'\n  document.getElementById('stats-gym-label').innerHTML = 'Gyms'\n  document.getElementById('stats-pkstop-label').innerHTML = 'PokéStops'\n\n  var i = 0\n  var arenaCount = []\n  var arenaTotal = 0\n  var pkmnCount = []\n  var pkmnTotal = 0\n  var pokestopCount = []\n  var pokestopTotal = 0\n  var pokeStatTable = $('#pokemonList_table').DataTable()\n\n  // Bounds of the currently visible map\n  var currentVisibleMap = map.getBounds()\n\n  // Is a particular Pokémon/Gym/Pokéstop within the currently visible map?\n  var thisPokeIsVisible = false\n  var thisGymIsVisible = false\n  var thisPokestopIsVisible = false\n\n  if (Store.get('showPokemon')) {\n    $.each(mapData.pokemons, function (key, value) {\n      var thisPokeLocation = { lat: mapData.pokemons[key]['latitude'], lng: mapData.pokemons[key]['longitude'] }\n      thisPokeIsVisible = currentVisibleMap.contains(thisPokeLocation)\n\n      if (thisPokeIsVisible) {\n        pkmnTotal++\n        if (pkmnCount[mapData.pokemons[key]['pokemon_id']] === 0 || !pkmnCount[mapData.pokemons[key]['pokemon_id']]) {\n          pkmnCount[mapData.pokemons[key]['pokemon_id']] = {\n            'ID': mapData.pokemons[key]['pokemon_id'],\n            'Count': 1,\n            'Name': mapData.pokemons[key]['pokemon_name']\n          }\n        } else {\n          pkmnCount[mapData.pokemons[key]['pokemon_id']].Count += 1\n        }\n      }\n    })\n\n    var pokeCounts = []\n\n    for (i = 0; i < pkmnCount.length; i++) {\n      if (pkmnCount[i] && pkmnCount[i].Count > 0) {\n        pokeCounts.push(\n          [\n            '<img src=\\'static/icons/' + pkmnCount[i].ID + '.png\\' />',\n            '<a href=\\'http://www.pokemon.com/us/pokedex/' + pkmnCount[i].ID + '\\' target=\\'_blank\\' title=\\'View in Pokédex\\' style=\\'color: black;\\'>' + pkmnCount[i].Name + '</a>',\n            pkmnCount[i].Count,\n            (Math.round(pkmnCount[i].Count * 100 / pkmnTotal * 10) / 10) + '%'\n          ]\n        )\n      }\n    }\n\n    // Clear stale data, add fresh data, redraw\n\n    $('#pokemonList_table').dataTable().show()\n    pokeStatTable\n      .clear()\n      .rows.add(pokeCounts)\n      .draw()\n  } else {\n    pokeStatTable\n      .clear()\n      .draw()\n\n    document.getElementById('pokeStatStatus').innerHTML = 'Pokémon markers are disabled'\n    $('#pokemonList_table').dataTable().hide()\n  }   // end Pokémon processing\n\n  // begin Gyms processing\n  if (Store.get('showGyms')) {\n    $.each(mapData.gyms, function (key, value) {\n      var thisGymLocation = { lat: mapData.gyms[key]['latitude'], lng: mapData.gyms[key]['longitude'] }\n      thisGymIsVisible = currentVisibleMap.contains(thisGymLocation)\n\n      if (thisGymIsVisible) {\n        arenaTotal++\n        if (arenaCount[mapData.gyms[key]['team_id']] === 0 || !arenaCount[mapData.gyms[key]['team_id']]) {\n          arenaCount[mapData.gyms[key]['team_id']] = 1\n        } else {\n          arenaCount[mapData.gyms[key]['team_id']] += 1\n        }\n      }\n    })\n\n    var arenaListString = '<table><th>Icon</th><th>Team Color</th><th>Count</th><th>%</th><tr><td></td><td>Total</td><td>' + arenaTotal + '</td></tr>'\n    for (i = 0; i < arenaCount.length; i++) {\n      if (arenaCount[i] > 0) {\n        if (i === 1) {\n          arenaListString += '<tr><td><img src=\"static/forts/Mystic.png\" /></td><td>' + 'Blue' + '</td><td>' + arenaCount[i] + '</td><td>' + Math.round(arenaCount[i] * 100 / arenaTotal * 10) / 10 + '%</td></tr>'\n        } else if (i === 2) {\n          arenaListString += '<tr><td><img src=\"static/forts/Valor.png\" /></td><td>' + 'Red' + '</td><td>' + arenaCount[i] + '</td><td>' + Math.round(arenaCount[i] * 100 / arenaTotal * 10) / 10 + '%</td></tr>'\n        } else if (i === 3) {\n          arenaListString += '<tr><td><img src=\"static/forts/Instinct.png\" /></td><td>' + 'Yellow' + '</td><td>' + arenaCount[i] + '</td><td>' + Math.round(arenaCount[i] * 100 / arenaTotal * 10) / 10 + '%</td></tr>'\n        } else {\n          arenaListString += '<tr><td><img src=\"static/forts/Uncontested.png\" /></td><td>' + 'Clear' + '</td><td>' + arenaCount[i] + '</td><td>' + Math.round(arenaCount[i] * 100 / arenaTotal * 10) / 10 + '%</td></tr>'\n        }\n      }\n    }\n    arenaListString += '</table>'\n    document.getElementById('arenaList').innerHTML = arenaListString\n  } else {\n    document.getElementById('arenaList').innerHTML = 'Gyms markers are disabled'\n  }\n\n  if (Store.get('showPokestops')) {\n    $.each(mapData.pokestops, function (key, value) {\n      var thisPokestopLocation = { lat: mapData.pokestops[key]['latitude'], lng: mapData.pokestops[key]['longitude'] }\n      thisPokestopIsVisible = currentVisibleMap.contains(thisPokestopLocation)\n\n      if (thisPokestopIsVisible) {\n        if (mapData.pokestops[key]['lure_expiration'] && mapData.pokestops[key]['lure_expiration'] > 0) {\n          if (pokestopCount[1] === 0 || !pokestopCount[1]) {\n            pokestopCount[1] = 1\n          } else {\n            pokestopCount[1] += 1\n          }\n        } else {\n          if (pokestopCount[0] === 0 || !pokestopCount[0]) {\n            pokestopCount[0] = 1\n          } else {\n            pokestopCount[0] += 1\n          }\n        }\n        pokestopTotal++\n      }\n    })\n    var pokestopListString = '<table><th>Icon</th><th>Status</th><th>Count</th><th>%</th><tr><td></td><td>Total</td><td>' + pokestopTotal + '</td></tr>'\n    for (i = 0; i < pokestopCount.length; i++) {\n      if (pokestopCount[i] > 0) {\n        if (i === 0) {\n          pokestopListString += '<tr><td><img src=\"static/forts/Pstop.png\" /></td><td>' + 'Not Lured' + '</td><td>' + pokestopCount[i] + '</td><td>' + Math.round(pokestopCount[i] * 100 / pokestopTotal * 10) / 10 + '%</td></tr>'\n        } else if (i === 1) {\n          pokestopListString += '<tr><td><img src=\"static/forts/PstopLured.png\" /></td><td>' + 'Lured' + '</td><td>' + pokestopCount[i] + '</td><td>' + Math.round(pokestopCount[i] * 100 / pokestopTotal * 10) / 10 + '%</td></tr>'\n        }\n      }\n    }\n    pokestopListString += '</table>'\n    document.getElementById('pokestopList').innerHTML = pokestopListString\n  } else {\n    document.getElementById('pokestopList').innerHTML = 'PokéStops markers are disabled'\n  }\n}\n"]}